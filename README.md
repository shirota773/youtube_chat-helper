# YouTube Chat Helper - Chrome 拡張機能

## 概要
YouTube Chat Helper は、YouTube および Holodex のライブチャットの入力体験を向上させる Chrome 拡張機能です。頻繁に使用するチャットメッセージやスタンプをテンプレートとして保存し、すばやく再挿入できるようにすることで、繰り返しのチャット入力を効率化します。

## 主な機能

### 1. テンプレート保存・挿入
- チャット入力（テキスト + スタンプ絵文字）をワンクリックでテンプレートとして保存
- 保存したテンプレートをチャット入力欄にすばやく挿入
- テンプレートはボタンとして入力欄の上に表示

### 2. チャンネル別・グローバルテンプレート
- **チャンネル別テンプレート**: 特定のチャンネル専用のテンプレート（青色ボタン）
- **グローバルテンプレート**: すべてのチャンネルで共通で使えるテンプレート（紫色ボタン）
- テンプレートをグローバル⇔ローカル間で移動可能

### 3. テンプレート管理機能
- **ドラッグ＆ドロップ**: ボタンをドラッグして並び順を変更
- **右クリックメニュー**: 削除、グローバル/ローカル移動、別名表示の設定
- **別名表示**: 長いテンプレートに短い別名を設定して見やすくする（オレンジ枠で表示）

### 4. クロスサイト対応
- **YouTube** と **Holodex** の両方で動作
- chrome.storage を使用して、両サイト間でテンプレートを共有
- チャンネル情報の自動検出（複数のフォールバック方式）

### 5. 設定
- スタンプの自動読み込み設定（ページロード時に絵文字ボタンを自動クリック）
- 設定はすべてのサイト間で共有

## 使い方

### 基本操作

#### 1. テンプレートを保存
1. YouTube または Holodex のライブチャットの入力欄にメッセージやスタンプを入力
2. 入力欄の上にある **Save** ボタンをクリック
3. テンプレートが保存され、ボタンとして表示されます

#### 2. テンプレートを挿入
- 保存されたボタンをクリックすると、そのテンプレートがチャット入力欄に挿入されます

#### 3. テンプレートを管理
- **ボタンをドラッグ**: ボタンの順番を変更
- **右クリック**: コンテキストメニューを表示
  - **削除**: テンプレートを削除
  - **グローバルに移動** / **ローカルに移動**: テンプレートの種類を変更
  - **別名表示**: 長いテンプレートに短い別名を設定
  - **もとに戻す**: 別名を削除して元の表示に戻す

### 別名表示機能
長いテンプレート（例：「おはようございます！今日も配信お疲れ様です！🎉🎊」）に短い別名（例：「おは🎉」）を設定できます。

1. テンプレートボタンを右クリック
2. **別名表示** を選択
3. 別名を入力して **OK** をクリック
4. ボタンがオレンジの枠で表示され、別名が表示されます

### グローバル・ローカル切り替え
テンプレートをグローバル（全チャンネル共通）とローカル（チャンネル専用）で切り替えられます。

1. テンプレートボタンを右クリック
2. **グローバルに移動** または **ローカルに移動** を選択
3. グローバルテンプレートは紫色、ローカルテンプレートは青色で表示されます

## デモ
以下の GIF で拡張機能の使用方法を示します:

![使用例](gif/example.gif)

## 対応サイト
- **YouTube** (youtube.com)
- **Holodex** (holodex.net)

両サイト間でテンプレートデータは共有されます。

## インストール方法
1. このリポジトリをクローンまたはダウンロード
2. Chrome を開き、`chrome://extensions/` にアクセス
3. **デベロッパーモード** を有効化（画面右上）
4. **パッケージ化されていない拡張機能を読み込む** をクリック
5. `youtube_chat-helper` フォルダを選択
6. 拡張機能がインストールされ、使用可能になります

## 技術仕様
- **Manifest Version**: 3
- **ストレージ**: chrome.storage.local（クロスサイト共有対応）
- **コンテンツスクリプト**: `content.js`（拡張機能コンテキスト）、`inject.js`（ページコンテキスト）
- **メッセージパッシング**: window.postMessage を使用した content.js ⇔ inject.js 間通信
- **CSP対応**: Content Security Policy に準拠したコード

## バージョン履歴
- **3.7**: 重複ボタン作成の問題を修正
- **3.6**: デバッグログを削除
- **3.5**: 拡張機能リロード時のエラーハンドリングを追加
- **3.4**: チャンネル情報検出のデバッグログを追加
- **3.3**: CSP 違反エラーを修正
- **3.2**: localStorage から chrome.storage.local に移行
- **3.1**: Holodex 対応、チャンネル情報検出の改善
- **3.0**: リファクタリング版

## 注意事項
- 拡張機能は YouTube および Holodex のライブチャットページでのみ動作します
- テンプレートデータは chrome.storage.local に保存されます
- iframe 内のクロスオリジン制約により、一部の機能は制限される場合があります

## ライセンス
このプロジェクトはオープンソースであり、MIT ライセンスのもとで提供されます。
